
/* async function galerieAfficherPhotos() {
    const urlApi = "http://localhost:5678/api/works";
    const url = await fetch(urlApi, {
        method: "GET",
        headers: {
            Accept: "application/json",
        },
    });

    if (url.ok === true) {
        const works = await url.json();

        for (let work of works) {

            const figure = createElement("figure")
            // const img = createElement("img")
            const img = new Image()
            const figcaption = createElement("figcaption")




            img.src = work.imageUrl;
            img.setAttribute("alt", work.title);
            figcaption.innerHTML = work.title;



            figure.appendChild(img)
            figure.appendChild(figcaption)
            galerie.appendChild(figure)

            console.log(work.imageUrl)
        }



    } else {
        const loader = createElement("p")
        loader.innerText = "Impossible de charger la galerie";
        loader.style.color = "red";
        galerie.prepend(loader)
        return;
    }
    throw new Error("Erreur");
}

galerieAfficherPhotos(); */





//parameter passed from button (Parameter same as category)
function filterProduct(value) {
  //Button class code
  let buttons = document.querySelectorAll(".button-value");
  buttons.forEach((button) => {
    //check if value equals innerText
    if (value.toUpperCase() == button.innerText.toUpperCase()) {
      button.classList.add("active");
    } else {
      button.classList.remove("active");
    }
  });
  //select all cards
  let elements = document.querySelectorAll(".card");
  //loop through all cards
  elements.forEach((element) => {
    //display all cards on 'all' button click
    if (value == "all") {
      element.classList.remove("hide");
    } else {
      //Check if element contains category class
      if (element.classList.contains(value)) {
        //display element based on category
        element.classList.remove("hide");
      } else {
        //hide other elements
        element.classList.add("hide");
      }
    }
  });
}



-------------------------------------------------------------------------



function createElement(element) {
    return document.createElement(element)
}

function selectElement(element) {
    return document.querySelector(element)
}

const galerie = selectElement('.gallery')

const portfolio = selectElement('#portfolio')
const divBnt = createElement("div")
divBnt.setAttribute("class", "btn-categorie")

const btnTous = createElement("button")
const btnObjets = createElement("button")
const btnAppart = createElement("button")
const btnHotels = createElement("button")


btnTous.innerText = "Tous"
btnObjets.innerText = "Objets"
btnAppart.innerText = "Appartements"
btnHotels.innerText = "Hôtels & restaurants"

divBnt.append(btnTous, btnObjets, btnAppart, btnHotels)
portfolio.append(divBnt, galerie)




const optionGet = {
    method: "GET",
    headers: {
        Accept: "application/json",
    },
}

const urlApiWorks = "http://localhost:5678/api/works"

function galerieAfficherPhotos() {
    fetch(urlApiWorks, optionGet)
        .then(function (response) {
            if (response.ok) {
                return response.json();
            } else {
                console.log('Mauvaise réponse du réseau')
            }
        })
        .then(function (works) {
            for (let work of works) {


                if (work.category.name == "Objets") {

                    btnObjets.addEventListener("click", function () {

                        const figure = createElement("figure")
                        // const img = createElement("img")
                        const img = new Image()
                        const figcaption = createElement("figcaption")

                        img.src = work.imageUrl;
                        img.setAttribute("alt", work.title);
                        figcaption.innerHTML = work.title;

                        figure.append(img, figcaption)
                        galerie.appendChild(figure)

                        btnObjets.style.background = "#1D6154";
                        btnObjets.style.color = "white";



                    });



                }

            }





        })
        .catch(function (error) {
            console.log("Il y a eu un problème avec l'opération fetch :" + error.message);
        });






}

btnTous.addEventListener("click", function () {

    btnTous.style.background = "#1D6154";
    btnTous.style.color = "white";



});


btnObjets.addEventListener("click", function () {
    works.filter(works => works.category.name == "Appartements").forEach(work => {


    });

    btnObjets.style.background = "#1D6154";
    btnObjets.style.color = "white";



});





galerieAfficherPhotos()















